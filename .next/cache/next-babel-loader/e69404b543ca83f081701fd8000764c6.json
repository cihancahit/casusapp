{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport BuyMe from \"../components/BuyMe\";\nimport { withTranslation } from \"../utils/i18n\";\nimport Loading from \"../components/Loading\";\nimport Swal from \"sweetalert2\";\nimport { lockedMessage } from \"../utils/misc\";\nimport AddAppButton from \"../components/AddAppButton\";\n\nconst Home = ({\n  t,\n  i18n,\n  loading\n}) => {\n  const router = useRouter();\n  const {\n    0: newGameLoading,\n    1: setNewGameLoading\n  } = useState(false);\n\n  const onNewGame = async e => {\n    e.preventDefault();\n    setNewGameLoading(true);\n\n    try {\n      const res = await fetch(window.location.origin + \"/new\", {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          name\n        })\n      });\n\n      if (res.status === 200) {\n        const {\n          gameCode\n        } = await res.json();\n        router.push(\"/\" + gameCode);\n      } else if (res.status === 423) {\n        const {\n          minutes\n        } = await res.json();\n        setNewGameLoading(false);\n        Swal.fire(lockedMessage(minutes));\n      } else {\n        throw res.status + \" \" + res.statusText;\n      }\n    } catch (error) {\n      console.error(error);\n      Swal.fire(error);\n      setNewGameLoading(false);\n    }\n  };\n\n  const showSpyfallBack = i18n.language === \"tr\";\n  return __jsx(\"div\", {\n    className: \"main-menu\"\n  }, __jsx(\"div\", {\n    style: {\n      position: \"relative\",\n      margin: \"1em auto 0\",\n      width: \"fit-content\"\n    }\n  }, __jsx(\"h3\", null, t(\"ui.welcome to spyfall\")), __jsx(\"img\", {\n    className: \"spyfall-back\",\n    src: \"/m3works.png\",\n    alt: \"back\"\n  })), __jsx(\"hr\", null), (loading || newGameLoading) && __jsx(Loading, null), !loading && __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"button-container\"\n  }, __jsx(Link, {\n    href: \"/join\"\n  }, __jsx(\"button\", {\n    id: \"btn-join-game\",\n    className: \"btn-large\"\n  }, t(\"ui.join game\"))), __jsx(\"button\", {\n    id: \"btn-new-game\",\n    onClick: onNewGame,\n    className: \"btn-large\"\n  }, t(\"ui.new game\"))), __jsx(\"div\", {\n    className: \"button-container-vertical\"\n  }, __jsx(AddAppButton, null))));\n};\n\nexport default withTranslation(\"common\")(Home);","map":null,"metadata":{},"sourceType":"module"}